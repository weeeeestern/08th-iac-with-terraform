# 주제

- IaC 개념 이해
- Terraform 이란
- Terraform 주요 개념
- Ansible과 간단 비교

# 요약
인프라를 수작업으로 설정하던 시대는 종결되었다. 코드를 통해 인프라를 정의하고
자동으로 프로비저닝하는 방식이 바로 IaC (Infra As Code)이다. 이를 적용하면 오류를
줄이고 속도를 높이며, 환경의 일관성을 확보할 수 있다.

Terraform은 인프라 리소스를 선언적으로 어떻게 만들지 정의하는 데에 강하고, Ansible은 이미 만들어진 인프라 위에서
어떻게 설정할지 즉, 설정 및 배포 관점에서 더 잘 맞는다. 

# 학습 내용
### IaC 란?
- 인프라를 코드로써 관리하고 프로비저닝한다는 개념이다. 수작업 설정 대신 스크립트나 선언형 파일로 인프라를 정의한다.
- 버전 관리가 가능하며 재사용 가능하고, 동일한 환경을 반복하여 와라락 만들 수 있다.
- 주요 특징으로는 선언형 vs 명령형 접근 방식, 자동화, 반복 가능성, 오류 감소 등이 있다.
- 장점으로는 속도 향상, 일관성 확보, 비용 및 위험 축소가 있다.
- 주의사항 및 한계로는 모든 환경이 자동화에 적합한 것은 아니며, 상태관리나 변경추적이 복잡해질 수도 있다는 점이 있다.

### Terraform 이란?
- HashiCorp가 만든 오픈소스 인프라 프로비저닝 도구이다.
- 선언형 언어인 HCL을 통해 리소스(ex. 클라우드, VM, 네트워크, 스토리지 등)을 정의한다.
- 장점으로는 여러 클라우드나 온프레미스 환경을 하나의 코드로 관리 가능하며, 상태(stat)파일을 통해 현재 인프라 상태를 추적할 수 있다.
- 인프라 리소스를 처음 만들 때 아주 적합하다고 한다..
- 그래서 단점으로 운영 이후 설정과 배포 단계까지의 강점은 상대적으로 약할 수 있다고 한다.

### Terraform 주요 개념
- Provider : Terraform에게 “AWS랑 얘기해라”, “GCP랑 얘기해라”라고 말해주는 플러그인 같은 존재.. 클라우드or 서비스의 api와의 중계 역할
- Resource : 실제 생성하거나 관리할 인프라 객체 (예: 가상머신, 네트워크, 스토리지)
- Module : 재사용 가능한 코드 블록. 인프라를 구조화하고 복제 가능하게 만든다.
- State file : 현재 인프라 상태를 추적하기 위해 저장하는 파일. 이 상태와 선언된 코드 간의 차이를 기반으로 변경을 계획한다.

### Ansible 과 간단히 비교해보아요
- 목적 측면
  - Terraform 은 인프라 리소스 생성과 변경 프로비저닝에 집중한다.
  - Ansible 은 서버/애플리케이션 설정과 배포에 집중한다.
- 접근 방식
  - Terraform 은 선언형 위주이다. ex. 이러한 상태를 원한다.
  - Ansible 은 절차형 또는 선언형 혼합 방식, 작업(Task) 중심이라 순서가 중요할 수 있다.
- 사용 시점
  - Terraform 은 인프라 구축 단계에서 강하다.
  - Ansible 은 설정 및 유지보수 단계에 더 적합하다.

- 둘중 하나만 고른다기 보다는 Terraform으로 인프라를 먼저 만든 후 Ansible로 설정 및 배포를 하는 흐름이 이상적이라고 한다.
- 설정 중심에 리소스 생성이 많지 않은 환경이라면 Ansible만 써도 괜찮지만, 반대로 리소스를 대규모로 만들거나 멀티클라우드를 다루면 Terraform이 아주아주 유용하다고 한다!

# 추가
- 여러 클라우드나 서비스가 혼재된 환경에서도 하나의 툴로 관리 가능하다. 따라서 특정 클라우드에 과도하게 종속되는 리스크가 줄어든다!
- 시작할 때부터 코드 파일들을 만들 때 파일(예: main.tf, variables.tf, outputs.tf)을 역할별로 나누자. 이렇게 하면 나중에 유지보수가 수월하다고 한다!
- 상태파일(state file)은 단순 “파일 하나”가 아니라 팀 작업에선 공유된 백엔드(remote backend)로 관리해야 충돌이나 데이터 손실 위험이 줄어든다.